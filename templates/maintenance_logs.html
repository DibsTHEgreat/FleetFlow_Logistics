<!--
Note for governance:
This pageâ€™s structure and styling were partially generated with ChatGPT assistance
to streamline Bootstrap layout and improve UI design.
-->
{% extends "base.html" %}

{% block content %}
<h1>Maintenance Logs</h1>

<div class="mb-3">
    <a href="{{ url_for('create_maintenance') }}" class="btn btn-primary">Add Maintenance Log</a>
</div>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Log ID</th>
            <th>Vehicle</th>
            <th>Service Date</th>
            <th>Service Type</th>
            <th>Description</th>
            <th>Odometer</th>
            <th>Vendor</th>
            <th>Cost</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    {% for log in logs %}
        <tr>
            <td>{{ log.log_id }}</td>
            <td>{{ log.vehicle_id }} ({{ log.vehicle_type }})</td>
            <td>{{ log.service_date }}</td>
            <td>{{ log.service_type }}</td>
            <td>{{ log.description }}</td>
            <td>{{ log.odometer_at_service or '-' }}</td>
            <td>{{ log.vendor or '-' }}</td>
            <td>
                {% if log.cost is not none %}
                    ${{ '%.2f'|format(log.cost) }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td class="text-end">
                <a href="{{ url_for('edit_maintenance', log_id=log.log_id) }}" class="btn btn-sm btn-secondary">Edit</a>
                <form action="{{ url_for('delete_maintenance', log_id=log.log_id) }}"
                      method="post"
                      style="display:inline"
                      onsubmit="return confirm('Delete this maintenance log?');">
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="9" class="text-center text-muted">No maintenance records found.</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
